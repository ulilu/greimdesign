var screenwidth=document.body.clientWidth,screenheight=document.body.clientWidth,navigation=$(".navi"),menuwrapper=$(".menuwrapper"),menulistwrapper=$(".menulist > li"),menuitems=$(".menuitem"),productitems=$("ul.products a.menuitem"),infoitems=$("ul.info a.menuitem"),breakpoint=750,timespan=1,closeNavi=function(){navigation.removeClass("is-active"),menuitems.removeClass("is-open"),menuitems.next("ul").hide(timespan)},toggleNavi=function(){$("a.navibut").on("click",function(e){e.preventDefault(),navigation.hasClass("is-active")?menuwrapper.hide(timespan,function(){navigation.toggleClass("is-active"),menuitems.removeClass("is-open"),menuitems.next("ul").hide(timespan)}):(navigation.toggleClass("is-active"),menuwrapper.show(timespan))})},toggleSubmenu=function(){screenwidth=document.body.clientWidth,Modernizr.touch||breakpoint>screenwidth?(console.log("Mobile browser"),menulistwrapper.unbind("mouseenter mouseleave"),menuitems.unbind("click").bind("click",function(e){e.preventDefault(),menuitems.not(this).next("ul.submenu").hide(timespan),menuitems.not(this).removeClass("is-open"),$(this).hasClass("is-open")?$(this).next("ul.submenu").hide(timespan,function(){$(this).prev("a.menuitem").toggleClass("is-open")}):($(this).next("ul.submenu").show(timespan),$(this).toggleClass("is-open"))})):!Modernizr.touch&&screenwidth>breakpoint&&(console.log("PC browser"),navigation.removeClass("is-active").addClass("is-active"),menuwrapper.show(),menuitems.removeClass("is-open"),menuitems.next("ul.submenu").hide(timespan),menuitems.click(function(e){e.preventDefault()}),menulistwrapper.unbind("mouseenter mouseleave").bind({mouseenter:function(){$(this).children("ul.submenu").show(timespan),$(this).children(menuitems).addClass("is-open")},mouseleave:function(){$(this).children("ul.submenu").hide(timespan,function(){$(this).siblings(infoitems).removeClass("is-open")}),$(this).children(productitems).removeClass("is-open")}}))};$(window).bind({orientationchange:function(){closeNavi(),toggleSubmenu(),console.log("orientationchange triggered")},resize:function(){document.body.clientWidth!=screenwidth&&document.body.clientHeight!=screenheight&&(console.log("resize triggered"),closeNavi(),toggleSubmenu())}}),$(document).ready(function(){$("a.hide-submenu").remove(),toggleNavi(),toggleSubmenu()});